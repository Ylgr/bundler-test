import {EntryPointContractEthers, providerEthers} from "./utils.js";
import {ethers} from "ethers";

async function main() {
    const userOperation = {
        "callData": "0x47e1da2a000000000000000000000000000000000000000000000000000000000000006000000000000000000000000000000000000000000000000000000000000000c000000000000000000000000000000000000000000000000000000000000001200000000000000000000000000000000000000000000000000000000000000002000000000000000000000000e8afce87993bd475faf2aea62e0b008dc27ab81a000000000000000000000000eae14c7e330ad0a095463cfc9ea36a289123158e0000000000000000000000000000000000000000000000000000000000000002000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000002000000000000000000000000000000000000000000000000000000000000004000000000000000000000000000000000000000000000000000000000000000c00000000000000000000000000000000000000000000000000000000000000044095ea7b3000000000000000000000000eae14c7e330ad0a095463cfc9ea36a289123158e0000000000000000000000000000000000000000000000009eb4ebd3fa3f05a800000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000028441f790cd000000000000000000000000000000000000000000000000000000000000008000000000000000000000000000000000000000000000000000000000670cf7af00000000000000000000000000000000000000000000000000000000670ce99f000000000000000000000000000000000000000000000000000000000000020000000000000000000000000099d672d63bb316b495b6700827d6153bf8e540fb000000000000000000000000f5c4c84929b084bbc1e2faf5458a89b5320688dc00000000000000000000000000000000000000000000000000000000000001000000000000000000000000000000000000000000000000009eb4ebd3fa3f05a80000000000000000000000000000000000000000000000000000000000000140000000000000000000000000000000000000000000000000000000000000016000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000f6164737a7a7a7a7a7a7a7a7a7361730000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000041675996fd0ef6f818e520f50a84f0fc74c910ab2b5a3876afeb6a534238ae785c0f948279fc72ae6caca27d9d9c9250b2933f8f4b7a96c7c86ab8301e7898dd701c0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000",
        "initCode": "0x",
        "maxFeePerGas": "0x9634260",
        "maxPriorityFeePerGas": "0x501bd0",
        "nonce": "0x1e3",
        "paymasterAndData": "0xe8afce87993bd475faf2aea62e0b008dc27ab81a",
        "sender": "0x99D672D63bB316B495B6700827D6153Bf8E540Fb",
        "signature": "0x0da0e8ffd79a479ff1d3abbd2259127c14d9ef8e0787632255619f380fac86a81e879b4699dadeead1bfa4e75ce6784df9eb2c6fa827a3371527d756455473ae1b",
        "callGasLimit": "0x43194",
        "verificationGasLimit": "0x147dc",
        "preVerificationGas": "0x26efd"
    }

    const sender = ethers.constants.AddressZero
    const callData = '0x'

    try {
        const gasPrice = await providerEthers.getGasPrice()
        await EntryPointContractEthers.callStatic.simulateHandleOp(userOperation, sender, callData, {gasPrice})
    } catch (e) {
        console.log('e: ', e.stack)
        console.log('e.errorArgs: ', e.errorArgs)
        console.log('e.errorArgs.paid: ', e.errorArgs.paid.toString())

    }
}

main().catch(console.error);
