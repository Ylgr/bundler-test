import {EntryPointContractEthers, providerEthers} from "./utils.js";

async function main() {
    const userOperation = {
        "callData": "0x47e1da2a000000000000000000000000000000000000000000000000000000000000006000000000000000000000000000000000000000000000000000000000000000a000000000000000000000000000000000000000000000000000000000000000e000000000000000000000000000000000000000000000000000000000000000010000000000000000000000007ec68929aa0cb1e01968ef294830f609a909e2fe0000000000000000000000000000000000000000000000000000000000000001000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000010000000000000000000000000000000000000000000000000000000000000020000000000000000000000000000000000000000000000000000000000000014416654d40000000000000000000000000a0cf6f69f847d062414792d8ac0ba879d2a857354c5bb3b73a3cee094e8e0d54f9e1dc53663b6072ef1e37aa89c3337d59198ec60000000000000000000000000000000000000000000000000000000000000001000000000000000000000000e8afce87993bd475faf2aea62e0b008dc27ab81a0000000000000000000000000000000000000000000000000de0b6b3a764000000000000000000000000000000000000000000000000003635c9adc5dea0000000000000000000000000000000000000000000000000000000000000000002580000000000000000000000000000000000000000000000000000000000004e2000000000000000000000000000000000000000000000000000000000670bb3fd000000000000000000000000000000000000000000000000000000006714ee7d00000000000000000000000000000000000000000000000000000000",
        "initCode": "0x",
        "maxFeePerGas": "0x986f700",
        "maxPriorityFeePerGas": "0xc31e0",
        "nonce": "0x1e3",
        "paymasterAndData": "0xe8afce87993bd475faf2aea62e0b008dc27ab81a",
        "sender": "0x99D672D63bB316B495B6700827D6153Bf8E540Fb",
        "signature": "0x0da0e8ffd79a479ff1d3abbd2259127c14d9ef8e0787632255619f380fac86a81e879b4699dadeead1bfa4e75ce6784df9eb2c6fa827a3371527d756455473ae1b",
        "preVerificationGas": "0x14c89",
        "verificationGasLimit": "0x1ab0e",
        "callGasLimit": "0x56cf4"
    }

    const sender = userOperation.sender
    const callData = userOperation.callData

    try {
        const gasPrice = await providerEthers.getGasPrice()
        await EntryPointContractEthers.callStatic.simulateHandleOp(userOperation, sender, callData, {gasPrice})
    }catch (e) {
        console.log('e.errorArgs: ', e.errorArgs)
        console.log('e.errorArgs.paid: ', e.errorArgs.paid.toString())

    }
}

main().catch(console.error);
